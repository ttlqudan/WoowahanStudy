# 7. 트랜잭션
데이터 시스템에 생길 수 있는 여러 가지 문제들이 존재한다.
* 데이터베이스 소프트웨어나 하드웨어는(쓰기 연산이 실행 중일 때를 포함해서) 언제라도 실패할 수 있다.
* 애플리케이션은 (연속된 연산이 실행되는 도중도 포함해서) 언제라도 죽을 수 있다.
* 네트워크가 끊기면 애플리케이션과 데이터베이스의 연결이 갑자기 끊기거나 데이터베이스 노드 사이의 통신이 안 될 수 있다.
* 여러 클라이언트가 동시에 데이터베이스에 쓰기를 실행해서 다른 클라이언트가 쓴 내용을 덮어쓸 수 있다.
* 클라이언트가 부분적으로만 갱신돼서 비정상적인 데이터를 읽을 수 있다.
* 클라이언트 사이의 경쟁 조건은 예측하지 못한 버그를 유발할 수 있다.

신뢰할 수 있는 시스템은 이런 문제들을 모두 해결할 수단이 있어야 한다.
수년간 이런 문제를 트랜잭션이라는 개념으로 단순화하여 관리했다.
이로인해 데이터시스템을 이용하는 애플리케이션 프로그래밍 모델이 단순해지는 효과를 얻었다.

<br>
<br>

## 애매모호한 트랜잭션의 개념
### ACID의 의미
현실의 데이터베이스의 내결함성 매커니즘을 의미하는 ACID는 모호하고 데이터베이스마다 구현이 제각각이다.

#### 원자성(Atomicity)
트랜잭션에서 발생한 쓰기 기록들을 완료 시키거나 취소 시킬 수 있는 능력.

#### 일관성(Consistency)
ACID의 일관성은 데이터에 관한 불변식을 보장하는 것이다.
데이터에 관한 불변식을 지키는 것은 애플리케이션의 책임이다.
따라서 C는 실제로 데이터베이스에 속하지 않는다.

#### 격리성(Isolation)
동시에 실행 되는 트랜잭션들을 격리하는 방법.
데이터베이스는 실제로는 여러 트랜잭션이 동시에 실행됐더라도 트랜잭션이 커밋됐을 때의 결과가 트랜잭션이 순차적으로 실행됐을 때의 결과와 동일하도록 보장한다.
하지만 직렬성 격리(Serializable Isolation)는 성능상 손해를 동반하므로, 어떤 데이티베이스는 이를 직렬성보다 보장이 약한 스냅숏 격리를 이용한다.

#### 지속성(Durability)
트랜잭션이 성공했다면 하드웨어 결함이 발생하거나 데이터베이스가 죽더라도 트랜잭션에서 기록한 모든 데이터는 손실되지 않는다는 보장이다.
하지만 궁극적인 완전한 보장이라는 개념은 존재하지 않으며, 트레이드 오프를 이해해야 한다.

<br>

### 단일 객체 연산과 다중 객체 연산



<br>
<br>


## 완화된 격리 수준
### 커밋 후 읽기
### 스냅숏 격리와 반복 읽기
### 갱신 손실 방지
### 쓰기 스큐와 팬텀

<br>
<br>

## 직렬성
### 실제적인 직렬 실행
### 2단계 잠금
### 직렬성 스냅숏 격리
